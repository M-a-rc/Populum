<%= render "shared/top_header", titre: "Réponse sondage"%>

<div class="survey-respond">
  <div class="container">
    <div class="back">
      <%= link_to root_path do %>
        <i class="fa-solid fa-angle-left"></i>
      <% end %>
    </div>

    <h1> <%= @survey.title %> </h1>
    <hr>
    <br>
    <p> <%= @survey.overview %> </p>
    <br>
    <p class="diplay-5">Date de début: <%= @survey.start_date.strftime("%m/%d/%Y") %> </p>
    <p class="diplay-5">Date de fin: <%= @survey.end_date.strftime("%m/%d/%Y") %> </p>
    <br>
    <hr>
    <br>

    <%= simple_form_for [@survey, Answer.new],  do |f| %>

      <% @survey.questions.each_with_index do |question, index| %>

        Question n°<%= index + 1 %>: <%= question.title %>
        <% case question.answer_type %>
        <% when 'single_choice' %>
          <%= f.simple_fields_for :question do |q|%>
            <% question.options.each do |option| %>
              <%= q.radio_button_tag 'option_id', option.id %>
              <%= q.option.title %>
            <% end %>
          <% end %>
        <% when 'multiple_choice' %>
          <%= f.simple_fields_for :question do |q|%>
            <% question.options.each do |option| %>
              <%= q.check_box_tag 'option_id', option.id %>
              <%= q.option.title %>
            <% end %>
          <% end %>
        <% when 'long_answer' %>
          <%= f.simple_fields_for :question do |q|%>
            <%= q.input :answer_fields %>
          <% end %>
        <% end %>
      <% end %>
      <br>
    <%= f.button :submit, "Valider", class:"m-2 btn btn-outline-primary" %>
    <% end %>
    </ul>
  </div>
</div>
